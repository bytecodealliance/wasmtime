[package]
description = "The WebAssembly Pre-Initializer"
documentation = "https://docs.rs/wasmtime-wizer"
edition.workspace = true
rust-version.workspace = true
exclude = ["**.wasm"]
license = "Apache-2.0 WITH LLVM-exception"
name = "wasmtime-wizer"
readme = "./README.md"
repository = "https://github.com/bytecodealliance/wasmtime"
version.workspace = true
authors.workspace = true

[lints]
workspace = true

[package.metadata.docs.rs]
all-features = true

[[bin]]
name = "wizer"
required-features = ["env_logger", "clap"]

[[bench]]
name = "regex"
harness = false

[[bench]]
name = "uap"
harness = false

[dependencies]
anyhow = { workspace = true }
env_logger = { workspace = true, optional = true }
log = { workspace = true }
rayon = { workspace = true }
clap = { workspace = true, optional = true }
wasm-encoder = { workspace = true }
wasmparser = { workspace = true }
wasmprinter = { workspace = true, optional = true }
wasmtime = { workspace = true, features = ['std', 'runtime', 'cranelift'] }
wasmtime-wasi = { workspace = true, features = ["p1"] }

[dev-dependencies]
criterion = { workspace = true }
env_logger = { workspace = true }
wasmprinter = { workspace = true }
wat = { workspace = true }

[features]
# Enable this dependency to get messages with WAT disassemblies when certain
# internal panics occur.
wasmprinter = ['dep:wasmprinter']
